<!-- Page Content -->

    <!-- /row -->
    <div class="row">
      <div class="col-sm-12">
        <div class="white-box">
          <div class="row">
            <div class="col-md-9">
              <h3 class="box-title m-b-30">{{'NOTIFICATIONTEMPLATES' | translate}}</h3>

            </div>
            <div class="col-md-3">
              <div class="pull-right">
                <button (click)="modalAdd.show(); add = true;" class="btn btn-info btn-rounded">{{'ADD' | translate}} <i class="fa fa-plus" aria-hidden="true"></i></button>
                <button *ngIf="!loading" class="btn btn-info btn-rounded"><i class="fa fa-refresh" aria-hidden="true"></i></button>
                <button *ngIf="loading" class="btn btn-info btn-rounded"><i class="fa fa-refresh fa-spin"></i></button>

              </div>
            </div>
          </div>


          <div class="table-responsive">
            <table id="example23" class="table table-striped">
              <thead>
              <tr>
                <th>{{'CODE' | translate}}</th>
                <th>{{'SUBJECT' | translate}}</th>
                <th>{{'TEMPLATE' | translate}}e</th>
                <th>{{'ACTIONS' | translate}}</th>
                <app-loader [loading]="loading"></app-loader>
              </tr>
              </thead>
              <tbody>
              <tr *ngFor="let row of templates | slice:start:end;">
                <td>{{row.code}}</td>
                <td>{{row.subject}}</td>
                <td>{{row.template}}</td>
                <td>
                  <a role="button" class="popup-with-form" (click)="modalEdit.show(); selectedTemplate = row">
                    <i class="fa fa-pencil action-button-at"></i>
                  </a>
                  <a role="button" (click)="modalDelete.show(); selectedTemplate = row" class="popup-with-form"><i class="fa fa-times action-button-at" aria-hidden="true"></i></a>
                </td>
              </tr>

              </tbody>
            </table>


          </div>
        </div>
      </div>
    </div>
    <!-- /.row -->


<app-modal #modalAdd>
  <div class="app-modal-header">
    {{'ADDNEWTEMPLATE' | translate}}
  </div>
  <div class="app-modal-body">
    <form class="form-horizontal" role="form" (ngSubmit)="formAdd.form.valid && onSubmitAdd(formAdd)" #formAdd="ngForm">
      <div class="p-l-20">
        <div class="row">
          <div class="col-md-12">
            <div class="form-group" [ngClass]="{ 'has-error': formAdd.submitted && !code.valid }">
              <label class="col-md-12">{{'CODE' | translate}}:</label>
              <div class="col-md-12">
                <input required type="text" class="form-control" name="code"
                       #code="ngModel" ngModel>
                <span class="highlight"></span><span class="bar"></span>
                <div *ngIf="formAdd.submitted && !code.valid" class="help-block">{{'FIELDISREQUIRED' | translate}}</div>
              </div>
            </div>
          </div>
          <div class="col-md-12">
            <div class="form-group" [ngClass]="{ 'has-error': formAdd.submitted && !subject.valid }">
              <label class="col-md-12">{{'SUBJECT' | translate}}:</label>
              <div class="col-md-12">
                <input  required type="text" class="form-control" name="subject"
                        #subject="ngModel" ngModel>
                <span class="highlight"></span><span class="bar"></span>

                <div *ngIf="formAdd.submitted && !subject.valid" class="help-block">{{'FIELDISREQUIRED' | translate}}</div>
              </div>
            </div>
          </div>
          <div class="col-md-12">
            <div class="form-group" [ngClass]="{ 'has-error': formAdd.submitted && !template.valid }">
              <label class="col-md-12">{{'TEMPLATE' | translate}}:</label>
              <div class="col-md-12">
                <input required type="text" class="form-control" name="template"
                       #template="ngModel" ngModel>
                <span class="highlight"></span><span class="bar"></span>

                <div *ngIf="formAdd.submitted && !template.valid" class="help-block">{{'FIELDISREQUIRED' | translate}}</div>
              </div>
            </div>
          </div>
        </div>
        <button (click)="modalAdd.hide()" #cancel class="pull-right saveButton btn btn-default">{{'CANCEL' | translate}}</button>
        <button  class="pull-right saveButton btn btn-success" type="submit">{{'ADD' | translate}}</button>
      </div>
    </form>
  </div>
</app-modal>

<app-modal #modalEdit>
  <div class="app-modal-header">
    {{'EDITEMPLATE' | translate}}
  </div>
  <div class="app-modal-body">
    <form class="form-horizontal" role="form" (ngSubmit)="f.form.valid && onSubmit(f)" #f="ngForm">
      <div class="p-l-20">
        <div class="row">
          <div class="col-md-12">
            <div class="form-group" [ngClass]="{ 'has-error': f.submitted && !selectedTemplate.code }">
              <label class="col-md-12">{{'CODE' | translate}}:</label>
              <div class="col-md-12">
                <input  type="text" class="form-control"name="code"
                        [(ngModel)]="selectedTemplate && selectedTemplate.code">
                <span class="highlight"></span><span class="bar"></span>

                <div *ngIf="f.submitted && !selectedTemplate.code" class="help-block">{{'FIELDISREQUIRED' | translate}}</div>
              </div>
            </div>
          </div>
          <div class="col-md-12">
            <div class="form-group" [ngClass]="{ 'has-error': f.submitted && !selectedTemplate.subject }">
              <label class="col-md-12">{{'SUBJECT' | translate}}:</label>
              <div class="col-md-12">
                <input  type="text" class="form-control"name="subject"
                        [(ngModel)]="selectedTemplate && selectedTemplate.subject">
                <span class="highlight"></span><span class="bar"></span>

                <div *ngIf="f.submitted && !selectedTemplate.subject" class="help-block">{{'FIELDISREQUIRED' | translate}}</div>
              </div>
            </div>
          </div>
          <div class="col-md-12">
            <div class="form-group" [ngClass]="{ 'has-error': f.submitted && !selectedTemplate.template }">
              <label class="col-md-12">{{'TEMPLATE' | translate}}:</label>
              <div class="col-md-12">
                <input  type="text" class="form-control"name="template"
                        [(ngModel)]="selectedTemplate && selectedTemplate.template">
                <span class="highlight"></span><span class="bar"></span>

                <div *ngIf="f.submitted && !selectedTemplate.template" class="help-block">{{'FIELDISREQUIRED' | translate}}</div>
              </div>
            </div>
          </div>
        </div>
        <button (click)="modalEdit.hide()" #cancelEdit class="pull-right saveButton btn btn-default">{{'CANCEL' | translate}}</button>
        <button  class="pull-right saveButton btn btn-success" type="submit">{{'SAVE' | translate}}</button>
      </div>
    </form>
  </div>
</app-modal>




<app-modal #modalDelete>
  <div class="app-modal-header">
    {{'CONFIRMACTION' | translate}}
  </div>
  <div class="app-modal-body">
    {{'AREYOUSUREYOUWANTTODELETETHISITEM' | translate}}
  </div>
  <div class="app-modal-footer">
    <button type="button" class="btn btn-default" (click)="modalDelete.hide()">{{'CANCEL' | translate}}</button>
    <button type="button" class="btn btn-danger"  (click)="removeNotificationTemplate(this.selectedTemplate); modalDelete.hide()">{{'DELETE' | translate}}</button>
  </div>
</app-modal>

