
<div class="row" style="border-bottom: 1px solid rgba(120,130,140,.13);">
  <div class="comment-body col-sm-12 col-md-12 col-lg-12" style="border-bottom: none !important;">
    <div class="user-img text-center horizontal-center icon-box"><div data-icon="&#xe019;" class="linea-icon linea-basic icon-font"></div></div>
    <div class="mail-content">

      <!-- PRIKAZATI VACANCY EDIT I DELETE SAMO AKO MATCHA COMPANIJU -->
      <div class="box-title p-b-10 p-r-10" *ngIf="isCompany">
        <div class="pull-right">
          <a  role="button"  class="popup-with-form" (click)="modalEdit.show()">
            <i class="fa fa-pencil action-button-at"></i>
          </a>
          <a role="button"  (click)="modalDelete.show()" class="popup-with-form"><i class="fa fa-times action-button-at" aria-hidden="true"></i></a>
        </div>
      </div>

      <!--&lt;!&ndash; APPLY BUTTON &ndash;&gt;-->
      <!--<div class="box-title p-b-10 p-r-10" *ngIf="isUser && vacancy.status.status == 'ACTIVE' && !applicantApplied">-->
        <!--<div class="pull-right">-->
          <!--<a  role="button"  class="btn btn-default btn-rounded popup-with-form" (click)="modalApply.show()">-->
            <!--Apply-->
          <!--</a>-->
        <!--</div>-->
      <!--</div>-->

      <!-- APPLY BUTTON -->
      <div class="box-title p-b-10 p-r-10" *ngIf="isUser && applicantApplied">
        <div class="pull-right">
          <span  class="label label-table label-info">Application sent</span>

        </div>
      </div>

      <a [routerLink]="vacancy?.id===null ? [] : [vacancy?.id]" >
        <h5><b>{{vacancy?.name}}</b></h5>
        <span class="mail-desc" style="height:100px;">
          <div class="row">
            <div class="col-xs-12 col.sm-6 col-md-6 col-lg-4">
              <i class="fa fa-map-marker"></i> {{vacancy.id_location.name}}
            </div>
            <div class="col-xs-12 col.sm-6 col-md-6 col-lg-4">
              <b>Division: </b> {{vacancy.id_work_place.name}}
            </div>
            <div class="col-xs-12 col.sm-6 col-md-6 col-lg-6">
              <i class="fa fa-clock-o"></i> {{vacancy.date_from | date: 'dd/MM/yyyy'}} - {{vacancy.date_to | date: 'dd/MM/yyyy'}}
            </div>
            <div class="col-xs-12 col.sm-6 col-md-6 col-lg-4">
            </div>
            <div class="col-xs-12 col-sm-6 col-md-6 col-lg-4">
            </div>
            <div class="col-lg-12 m-t-5">
              <p>{{vacancy.description}}</p>
            </div>
            <div class="col-md-6 col-lg-4">
              <span [ngClass]="{'label-success' : vacancy.status.status == 'ACTIVE', 'label-danger' : vacancy.status.status != 'ACTIVE'}" class="label label-table">{{vacancy.status.status}}</span>
            </div>
          </div>
          <span class="time pull-right"><b>Last update: </b>{{vacancy.updated_at | date:'dd-MM-yyyy HH:mm'}}</span>
        </span>
      </a>


    </div>
  </div>

  <app-modal #modalEdit>
    <div class="app-modal-header">
      Edit Vacancy
    </div>
    <div class="app-modal-body">
      <form class="form-horizontal" role="form" (ngSubmit)="f.form.valid && onSubmitEdit(f)" #f="ngForm">
        <div class="p-l-20">
          <div class="row">
            <div class="col-md-12">
              <div class="form-group" [ngClass]="{ 'has-error': f.submitted && !vacancy.code }">
                <label class="col-md-12">Code:</label>
                <div class="col-md-12">
                  <input  type="text" class="form-control"name="code"
                          [(ngModel)]="vacancy && vacancy.code">
                  <span class="highlight"></span><span class="bar"></span>

                  <div *ngIf="f.submitted && !vacancy.code" class="help-block">Field is required</div>
                </div>
              </div>
            </div>
            <div class="col-md-12">
              <div class="form-group" [ngClass]="{ 'has-error': f.submitted && !vacancy.name }">
                <label class="col-md-12">Name:</label>
                <div class="col-md-12">
                  <input  type="text" class="form-control"name="name"
                          [(ngModel)]="vacancy && vacancy.name">
                  <span class="highlight"></span><span class="bar"></span>

                  <div *ngIf="f.submitted && !vacancy.name" class="help-block">Field is required</div>
                </div>
              </div>
            </div>
            <div class="col-md-12">
              <div class="form-group" [ngClass]="{ 'has-error': f.submitted && !vacancy.description }">
                <label class="col-md-12">Description:</label>
                <div class="col-md-12">
                  <input  type="text" class="form-control"name="description"
                          [(ngModel)]="vacancy && vacancy.description">
                  <span class="highlight"></span><span class="bar"></span>

                  <div *ngIf="f.submitted && !vacancy.description" class="help-block">Field is required</div>
                </div>
              </div>
            </div>
            <div class="col-md-12">
              <div class="form-group" [ngClass]="{ 'has-error': f.submitted && !vacancy.date_from }">
                <label class="col-md-12">Date from:</label>
                <div class="col-md-12">
                  <input  type="date" class="form-control"name="date_from"
                          [(ngModel)]="vacancy && vacancy.date_from">
                  <span class="highlight"></span><span class="bar"></span>

                  <div *ngIf="f.submitted && !vacancy.date_from" class="help-block">Field is required</div>
                </div>
              </div>
            </div>
            <div class="col-md-12">
              <div class="form-group" [ngClass]="{ 'has-error': f.submitted && !vacancy.date_to }">
                <label class="col-md-12">Date to:</label>
                <div class="col-md-12">
                  <input  type="date" class="form-control"name="date_to"
                          [(ngModel)]="vacancy && vacancy.date_to">
                  <span class="highlight"></span><span class="bar"></span>

                  <div *ngIf="f.submitted && !vacancy.date_to" class="help-block">Field is required</div>
                </div>
              </div>
            </div>

            <div class="col-md-12">
              <div class="form-group">
                <label class="col-md-12">Region Select:</label>
                <div class="col-md-12">
                  <select class="form-control p-0" [(ngModel)]="selectedRegion" name="selectedRegion">
                    <option *ngFor="let region of regions" [selected]="region?.name == selectedRegion.name" [ngValue]="region">{{region.name}}</option>
                  </select><span class="highlight"></span> <span class="bar"></span>
                </div>
              </div>
            </div>
            <div class="col-md-12">
              <div class="form-group">
                <label class="col-md-12">Workplace Select:</label>
                <div class="col-md-12">
                  <select class="form-control p-0" [(ngModel)]="selectedWorkplace" name="selectedWorkplace">
                    <option *ngFor="let workplace of workplaces" [selected]="workplace?.name == selectedWorkplace.name" [ngValue]="workplace">{{workplace.name}}</option>
                  </select><span class="highlight"></span> <span class="bar"></span>
                </div>
            </div>
              <div class="col-md-12">
                <div class="form-group">
                  <label class="col-md-12">Status:</label>
                  <div class="col-md-12">
                    <select class="form-control p-0" [(ngModel)]="vacancy && vacancy.status" name="status">
                      <option [selected]="vacancy?.status.status == 'ACTIVE'" value="ACTIVE">Active</option>
                      <option [selected]="vacancy?.status.status == 'CLOSED'" value="CLOSED">Closed</option>
                    </select><span class="highlight"></span> <span class="bar"></span>
                  </div>
                </div>
              </div>

          </div>
          <button (click)="modalEdit.hide()" #cancelEdit class="pull-right saveButton btn btn-default">Cancel</button>
          <button  class="pull-right saveButton btn btn-success" type="submit">Save</button>
          </div>
        </div>
      </form>
    </div>
  </app-modal>

  <app-modal #modalApply>
    <div class="app-modal-header">
     Vacancy
    </div>
    <div class="app-modal-body">
      <form class="form-horizontal" role="form">
        <div class="p-l-20">
          <div class="row">

            <div class="col-md-12">
              <div class="form-group" >
                <label>Code:</label>
                <p> {{vacancy?.code}} </p>
              </div>
            </div>

            <div class="col-md-12">
              <div class="form-group">
                <label>Name:</label>
                <p> {{vacancy?.name}} </p>
              </div>
            </div>

            <div class="col-md-12">
              <div class="form-group">
                <label>Description:</label>
                <p> {{vacancy?.description}} </p>
              </div>
            </div>

            <div class="col-md-12">
              <div class="form-group">
                <label>Date from:</label>
                <p> {{vacancy?.date_from}} </p>
              </div>
            </div>

            <div class="col-md-12">
              <div class="form-group" >
                <label>Date to:</label>
                <p> {{vacancy?.date_to}} </p>
              </div>
            </div>

            <div class="col-md-12">
              <div class="form-group">
                <label>Region:</label>
                <p> {{vacancy?.id_location.name}} </p>
              </div>
            </div>

            <div class="col-md-12">
              <div class="form-group">
                <label>Workplace:</label>
                <p> {{vacancy?.id_work_place.name}} </p>
              </div>
            </div>

            <button (click)="modalApply.hide()" #cancelApply class="pull-right saveButton btn btn-default">Cancel</button>
            <button (click)="apply()" class="pull-right saveButton btn btn-success">Apply</button>
          </div>
        </div>
      </form>
    </div>
  </app-modal>


  <app-modal #modalDelete>
    <div class="app-modal-header">
      Confirm action
    </div>
    <div class="app-modal-body">
      Are you sure you want to delete this vacancy?
    </div>
    <div class="app-modal-footer">
      <button type="button" class="btn btn-default" (click)="modalDelete.hide()">Cancel</button>
      <button type="button" class="btn btn-danger"  (click)="deleteVacancy(this.vacancy)">Delete</button>
    </div>
  </app-modal>









